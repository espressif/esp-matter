# Copyright (c) 2022 Project CHIP Authors
#
#
import("//build_overrides/mt793x_sdk.gni")

mt793x_sdk_include_dirs = [
  "${mt793x_sdk_build_root}/filogic/kernel/rtos/FreeRTOS/SourceV10/include",
  "${mt793x_sdk_build_root}/filogic/kernel/rtos/FreeRTOS/SourceV10/portable/GCC/ARM_CM33_NTZ/non_secure",
  "${mt793x_sdk_build_root}/filogic/kernel/service/inc",

  "${mt793x_sdk_build_root}/filogic/driver/board/mt7933_hdk/util/inc",
  "${mt793x_sdk_build_root}/filogic/driver/chip/inc",
  "${mt793x_sdk_build_root}/filogic/driver/chip/mt7933/inc",
  "${mt793x_sdk_build_root}/filogic/driver/CMSIS/Device/MTK/mt7933/Include",
  "${mt793x_sdk_build_root}/filogic/driver/CMSIS/Include",

  "${mt793x_sdk_build_root}/filogic/middleware/MTK/minicli/inc",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/nvdm/inc",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/connsys/inc",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/dhcpd/inc",

  "${mt793x_sdk_build_root}/filogic/middleware/third_party/mbedtls/include",

  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/os",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/os/freertos/include",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/os/freertos/hif/axi/include",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/os/freertos/hif/common/include",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/include",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/include/chips",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/include/mgmt",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/include/nic",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/prealloc/include",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/connectivity/wlan/os/freertos/include/fw_header",

  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/minisupp/inc/inc",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/minisupp/inc/src",
  "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/minisupp/inc/wpa_supplicant",

  "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/wlan_service/include",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/wlan_service/service/include",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/wlan_service/glue/osal/include",
  "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/wlan_service/glue/hal/include",

  "${mt793x_sdk_build_root}/filogic/project/mt7933_hdk/apps/matter_sdk/inc",

  "${mt793x_sdk_build_root}/filogic/",
]

mt793x_sdk_include_dirs += [
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/bt/btif",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/bt/btif/inc",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/connectivity/bt/btif/platform",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/bluetooth/inc",
    "${mt793x_sdk_build_root}/filogic/prebuilt/middleware/MTK/bluetooth/inc",
    "${mt793x_sdk_build_root}/filogic/middleware/third_party/mbedtls/include",
    "${mt793x_sdk_build_root}/filogic/middleware/third_party/mbedtls/configs",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/bt_callback_manager/inc",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/bt_tools/picus",
    "${mt793x_sdk_build_root}/filogic/project/mt7933_hdk/apps/matter_sdk/src/bt_app",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/fota/inc",
    "${mt793x_sdk_build_root}/filogic/middleware/MTK/fota/src/v3",
]

mt793x_sdk_defines = [
  "gEnableBleInactivityTimeNotify=1",
  "DUAL_MODE_APP=1",
  "gMainThreadStackSize_c=5096",
  "HEAP_SIZE=0xF000",
  "gLoggingActive_d=0",
  "gLogRingPlacementOffset_c=0xF000",
  "MBEDTLS_CONFIG_FILE=\"mt793x-mbedtls-config.h\"",
  "MTK_MINICLI_ENABLE",
  "MTK_MDNS_ENABLE",
  "MTK_FOTA_V3_ENABLE",
  "MTK_FOTA_V3_FREERTOS_ENABLE",
  #"MTK_HAL_NO_LOG_ENABLE",
  "MTK_DEBUG_LEVEL_ERROR",
  "MTK_DEBUG_LEVEL_WARNING",
  #"MTK_DEBUG_LEVEL_INFO",
  #"MTK_DEBUG_LEVEL_DEBUG",
]

# BLE - mt793x_sdk_Defines & include
mt793x_sdk_defines += [
    "MTK_BT_FW_DL_TO_EMI_ENABLE",
    "MTK_MT7933_BT_ENABLE",
    "MTK_BT_BUFFER_BIN_MODE",
    "BT_DEBUG",
    "MTK_BT_ENABLE",
    "MTK_BT_PICUS_ENABLE",
    "CHIP_MT7933",
    "__BT_DEBUG__",
    "BT_DRV_BTSNOOP_TO_UART",
]

# Wi-Fi
mt793x_sdk_defines += [
  "LWIP_DEBUG",
  "_HIF_AXI",
  "MT7933",
  "FREERTOS",
  "CFG_SUPPORT_CONNAC2X",
  "CFG_MTK_ANDROID_WMT",
  "CFG_THIN_DRV",
  "CFG_REMOVE_NO_CALLER=1",
  "CFG_SUPPORT_LINK_QUALITY_MONITOR=0",
  "CFG_SUPPORT_QA_TOOL=0",
  "__LITTLE_ENDIAN=1",
  "CFG_TC10_FEATURE=0",
  "CFG_TC1_FEATURE=0",
  "ARP_MONITER_ENABLE=0",
  "CFG_SUPPORT_MANUAL_OWN_CTRL=1",
  "CFG_SUPPORT_PRIV_SUSPEND_MODE=1",
  "CFG_SUPPORT_PRIV_CHIP_CONFIG=1",
  "CFG_SUPPORT_PRIV_RUN_HQA=1",
  "CFG_SUPPORT_PRIV_GET_MIB_INFO=1",
  "CFG_SUPPORT_PRIV_SET_PM=1",
  "CFG_SUPPORT_PRIV_GET_DRV_VER=1",
  "CFG_SUPPORT_PRIV_FIXED_RATE=1",
  "CFG_SUPPORT_PRIV_STA_STAT=1",
  "CFG_SUPPORT_PRIV_WTBL_INFO=1",
  "CFG_SUPPORT_PRIV_SW_CTRL=1",
  "CFG_SUPPORT_PRIV_DBGLVL=1",
  "CFG_SUPPORT_PWR_LIMIT_COUNTRY=1",
  "CFG_SUPPORT_ARP_OFFLOAD_CMD=1",
  "CFG_SUPPORT_802_11W=1",
  "CFG_SUPPORT_WPA3=1",
  "CFG_SUPPORT_DEBUG_SOP=1",
  "CFG_NUM_DIFFERENT_CHANNELS_STA=2",
  "CFG_NUM_DIFFERENT_CHANNELS_P2P=2",
  "CFG_DRIVER_INITIAL_RUNNING_MODE=3",
  "CFG_ENABLE_WAKE_LOCK=0",
  "CFG_DEFAULT_DBG_LEVEL=DBG_CLASS_ERROR",
  "CFG_SUPPORT_ROAMING=1",
  "CFG_ENABLE_EFUSE_MAC_ADDR=0",
  "CFG_SUPPORT_SINGLE_SKU_LOCAL_DB=1",
  "CFG_P2P_SCAN_REPORT_ALL_BSS=0",
  "CFG_SCAN_CHANNEL_SPECIFIED=1",
  "CFG_CHIP_RESET_SUPPORT=0",
  "CFG_SUPPORT_FREERTOS_NVRAM=0",
  "CFG_DIRECT_PBUF_WO_DMA=0",
  "CFG_SUPPORT_NO_SUPPLICANT_OPS=0",
  "CFG_NO_SCANINFO_IN_DRV=1",
  "CFG_SUPPORT_NO_SUPPLICANT_OPS_P2P=0",
  "CFG_ENABLE_WIFI_DIRECT=1",
  "CFG_P2P_DEV_FSM=1",
  "CFG_SUPPORT_DFS_MASTER=0",
  "CFG_SUPPORT_DFS=1",
  "CFG_SUPPORT_SAP_DFS_CHANNEL=0",
  "CFG_AUTO_CHANNEL_SEL_SUPPORT=0",
  "CFG_SUPPORT_WFD=0",
  "CFG_SUPPORT_WFD_COMPOSE_IE=0",
  "CFG_ENABLE_WIFI_DIRECT_CFG_80211=1",
  "CFG_DUAL_P2PLIKE_INTERFACE=0",
  "CFG_SUPPORT_P2P_GC=0",
  "CFG_SUPPORT_P2P_SCAN=0",
  "CFG_OPEN_GO_AS_AP_ONLY=0",
  "CFG_SUPPORT_HOTSPOT_WPS_MANAGER=0",
  "CFG_PROFILE_PBUF=0",
  "CONFIG_WIFI_SUPPORT_MODULATION=1",
  "CFG_SUPPORT_DEBUG_FS=0",
  "CFG_SUPPORT_TSF_USING_BOOTTIME=1",
  "CFG_SUPPORT_CHNL_CONFLICT_REVISE=1",
  "CFG_SUPPORT_AEE=0",
  "CFG_AMAZON_METRICS_LOG=0",
  "BUILD_QA_DBG=0",
  "CFG_BUILT_IN_DRIVER=0",
  "CFG_SUPPORT_PWR_LIMIT_FILE_LOAD=0",
  "CFG_ENABLE_DEWEIGHTING_CTRL=0",
  "CFG_IPI_2CHAIN_SUPPORT=1",
  "CFG_ENABLE_PS_INTV_CTRL=0",
  "CFG_ENABLE_1RPD_MMPS_CTRL=0",
  "CFG_SUPPORT_TWT=1",
  "CFG_SUPPORT_802_11AX=1",
  "CFG_WOW_SUPPORT=1",
  "CFG_SUPPORT_PASSPOINT=0",
  "CFG_HS20_DEBUG=0",
  "CFG_ENABLE_GTK_FRAME_FILTER=0",
  "CFG_MET_PACKET_TRACE_SUPPORT=0",
  "CFG_MET_TAG_SUPPORT=0",

  "LWIP_DEBUG=1",

  #"DBG=0",
  # HEAP_EXTEND_MULTI is 1, HEAP_EXTEND_HEAP5 is 0
  "MTK_OS_HEAP_EXTEND=1",
  "CFG_SUPPORT_NVDM=1",
  "CONFIG_WLAN_SERVICE=1",
  "CONFIG_TEST_ENGINE_OFFLOAD=1",
  "CONFIG_WIFI_TEST_TOOL=1",
  "CFG_BUFFER_BIN_FROM_FLASH=1",
  "MTK_MT7933_CONSYS_WIFI_ENABLE",
  "MTK_WLAN_SERVICE_ENABLE",
  "MTK_MT7933_CONSYS_WIFI_ENABLE",
  "MTK_WIFI_EMI_IN_PSRAM",
  "CONFIG_WIFI_SINGLE_FW",
  "CFG_PSRAM_ENABLE=0",
  "CFG_SUPPORT_HE_ER=1",
  "CFG_SUPPORT_FAST_CONNECT=1",
  "MTK_MINISUPP_ENABLE",
  "AP_DEFAULT_IPADDR=\"192.168.2.1\"",
  "PRIMARY_DNS=\"192.168.2.1\"",
  "SECONDARY_DNS=\"192.168.2.1\"",
]

mt793x_sdk_defines += [
  # HAL
  "HAL_ASIC_MPU_MODULE_ENABLED",
  "HAL_CACHE_MODULE_ENABLED",
  "HAL_CLOCK_MODULE_ENABLED",
  "HAL_DWT_MODULE_ENABLED",
  "HAL_EINT_MODULE_ENABLED",
  "HAL_FLASH_MODULE_ENABLED",
  "HAL_GPIO_MODULE_ENABLED",
  "HAL_GPT_MODULE_ENABLED",
  #"MTK_HAL_PLAIN_LOG_ENABLE",
  "HAL_PMU_MODULE_ENABLED",
  "HAL_TOP_THERMAL_MODULE_ENABLED",
  "HAL_MPU_MODULE_ENABLED",
  "HAL_NVIC_MODULE_ENABLED",
  "HAL_PSRAM_MODULE_ENABLED",
  "HAL_PSRAM_NON_UHS_ENABLED",
  "HAL_SLEEP_MANAGER_ENABLED",
  "HAL_SPI_MASTER_MODULE_ENABLED",
  "HAL_TRNG_MODULE_ENABLED",
  "HAL_UART_MODULE_ENABLED",
  "HAL_WDT_MODULE_ENABLED",
  "HAL_TOP_THERMAL_MODULE_ENABLED",
  "HAL_AES_MODULE_ENABLED",
  "HAL_PWM_MODULE_ENABLED",
  # others
  "MTK_NVDM_ENABLE",
]

mt793x_sdk_cflags = [
  "-Wno-error=absolute-value",
  "-Wno-unused-but-set-variable",
  "-Wno-unused-variable",
  "-Wno-unused-function",
  "-Wno-conversion",
  "-Wno-sign-compare",
  "-Wno-clobbered",
  "-Wno-implicit-fallthrough",
  "-fno-optimize-strlen",
  "-mthumb",
  "-MMD",
  "-MP",
]

mt793x_sdk_cflags += [ "-DPRODUCT_VERSION=7933" ]

mt793x_sdk_cflags += [
  "-Wno-format-nonliteral",
  "-Wno-error=shadow",
  "-Wno-error=type-limits",
]
